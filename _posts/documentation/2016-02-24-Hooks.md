---
layout       : feature-doc
title        : "Hooks"
date         : 2016-02-23 00:31:01 +0000
date_updated : 2016-01-25 00:31:02 +0000

f_image      : "/images/hooks@2x.png"
categories   : general
tax          : general
---
The foundation of **cwc** is build around Hooks. Hooks provided a mechanism for allowing display and controller clients to invoke functions created on that client. They also provide a way of defining callback functionality for **cwc** components.
<!--more-->

#### JavaScript declaration
{% highlight javascript linenos %}
/*------------------------------------------------------
* @object - CWC Main Hooks Object
* @info   - initiate CWC Hooks Object
*/
var Hooks = new cwc.Hooks({
});
{% endhighlight %}

[comment]: <> (--------------------------------------------------------------------------------------------------------)

## Set hook
In order to create a hook use the `set_hook` method on the **cwc.Hooks()** object. The `set_hook` method requires name for the hook and a method to be invoked when called.

| Keys          | Type     | Vales                                                     |
| ------------- | -------- | --------------                                            |
| hook_name     | Sting    | The name of the hook.                                     |
| method        | Function | Callback-function to be called when a hook is invoked.    |

#### JavaScript Example
{% highlight javascript linenos %}
/*------------------------------------------------------
* @Hook - cwc.Hooks Custom Hook
* @info - Create a hook to that can be called from the display
*/
Hooks.set_hook( {
  hook_name : 'my-custom-hook',
  method    : function( prams ) { console.log( prams )  }
});
{% endhighlight %}

[comment]: <> (--------------------------------------------------------------------------------------------------------)

## Hooks types
The are four different types of hook that can be called, but only three can be created. When creating or calling hook from the  `cwc.Hooks({})` object, prefixes can be included within the hook name in order to determined what type of hook is being called.

| Hook prefixes | Vales                                     |
| ------------- | --------------                            |
| hook:         | A reserved hook for the **cwc** object.   |
| c-hook:       | Display to Controllers hook call.         |
| d-hook:       | Controller to Display hook call.          |
| cwc:          | A reserved hook for the **cwc** object.   |

[comment]: <> (--------------------------------------------------------------------------------------------------------)

## Custom hooks
When creating hooks custom hook on a client only the hook name and callback function is required. Below is an example of creating a hook and invoking it using JavaScript. When wanting to call a custom hook using one of the **cwc** components, its required that the prefix of `hook:` is present, along with the hook name.

#### Javascript
{% highlight javascript linenos %}
/*------------------------------------------------------
* @Hook - cwc.Hooks Connect method
* @info - Create a hook to that can be called from the display
*/
Hooks.set_hook( {
  hook_name : 'my-custom-hook',
  method    : function( feedback ) { console.log( feedback )  } // { one : 1, two : 2, three : 3 }
});

/* -- Invoke Hook -- */
Hooks.invoke_hook({
    hook_name : 'd-hook:my-custom-hook',
    arguments : { one : 1, two : 2, three : 3 }
});
{% endhighlight %}

[comment]: <> (--------------------------------------------------------------------------------------------------------)

## Invoking Display hooks from Controller
The hooks library also provides a mechanism for allowing hooks to be invoked across the server. Meaning that, If the display application has the need to call a Hook created on the connected controllers. Using the prefix of `c-hook:` followed by the hook name, will achieve just this. Demos of code snippets can be found below:

#### Display client (JavaScript)
{% highlight javascript linenos %}
/*------------------------------------------------------
* @info - Set hook to ready to be called by controller
*/
Hooks.set_hook( {
  hook_name : 'called-by-controller',
  method    : function( feedback ) { console.log( feedback )  } // { one : 1, two : 2, three : 3 }
});
{% endhighlight %}

#### Controller client (JavaScript)
{% highlight javascript linenos %}
/*------------------------------------------------------
* @info - Invoked by on display client
*/
Hooks.invoke_hook({
    hook_name : 'd-hook:called-by-controller',
    arguments : { one : 1, two : 2, three : 3 }
});
{% endhighlight %}

[comment]: <> (--------------------------------------------------------------------------------------------------------)

## Invoking Controller hooks from Display
The same principle can be applied for when wanting to invoke Hooks from the controller application to the display. By including the the prefix of `d-hook:` followed by the name of the hook will do just this. See the demo below:

#### Controller client (JavaScript)
{% highlight javascript linenos %}
/*------------------------------------------------------
* @info - Set hook to ready to be called by display
*/
Hooks.set_hook( {
  hook_name : 'called-by-display',
  method    : function( feedback ) { console.log( feedback )  } // { one : 1, two : 2, three : 3 }
});
{% endhighlight %}

#### Display client (JavaScript)
{% highlight javascript linenos %}
/*------------------------------------------------------
* @info - Invoked by on display client
*/
Hooks.invoke_hook({
    hook_name : 'c-hook:called-by-display',
    arguments : { one : 1, two : 2, three : 3 }
});
{% endhighlight %}

[comment]: <> (--------------------------------------------------------------------------------------------------------)

## Reserved hook
The cwc library also has reserved hooks, so that call back functions can be injected when specific events are executed or certain conditions are met or within the **cwc** framework. **cwc** reserved hooks can also include the `d-hook:` and `c-hook:` prefixes in order to call reserved hook across the connection.

#### Display client (JavaScript)
{% highlight javascript linenos %}
/* -- Hooking reserved navgroup-updated event -- */
Hooks.set_hook({
    hook_name : 'cwc:navgroup-updated',
    arguments : { one : 1, two : 2, three : 3 }
});

/* -- Create connection success | Hook -- */
Hooks.invoke_clinet_hook({
    hook_name : 'd-hook:cwc:called-by-controller',
    arguments : { one : 1, two : 2, three : 3 }
});
{% endhighlight %}

>The full list of all reserved **cwc** has are shown below.

[comment]: <> (--------------------------------------------------------------------------------------------------------)

### Invoking hooks via JavaScript
Invoking a Hook via JavaScript is  by calling the `invoke` method on the **cwc.Hooks** object.

| Keys          | Type     | Vales                                                                   |
| ------------- | -------- | --------------                                                          |
| hook_name     | Sting    | The name of the hook you wish to invoke  `my-hook` or `d-hook:my-hook`  |
| arguments     | *        | Arguments can be passed in the method given in the creation of the hook |

#### Javascript
{% highlight javascript linenos %}
/* -- 01. Call a local hook --  */
Hooks.invoke_hook( {
  hook_name : 'my-custom-hook',
  arguments : { one : 1, two : 2, three : 3 }
} );

/* -- 02. Call a custom hook from controller to display --  */
Hooks.invoke_hook( {
  hook_name : 'd-hook:my-custom-hook',
  arguments : { one : 1, two : 2, three : 3 }
} );

/* -- 03. Call a reserved hook by the cwc object --  */
Hooks.invoke_hook( {
  hook_name : 'cwc:my-custom-hook',
  arguments : { one : 1, two : 2, three : 3 }
});
{% endhighlight %}

>Arguments can be passed in the form of an `object`, `boolean`, `intriguer` or `string`. `JSON.stringify` is applied to all arguments being passed to the server.


### HTML Example
Hooks can also be given as arguments for other **cwc** components. Example of the can see found thought the documentation.

#### HTML markup
{% highlight html linenos %}
/* -- Example 01. Calling reserved hook from controller to display  -- */
<div data-cwc-instructions='{ “on-pull“ : “d-hook:cwc:on-start-hook“ }' >

/* -- Example 02. Calling custom hook from controller to display  -- */
<div data-cwc-instructions='{ “on-pull“ : “d-hook:on-start-hook“ }' >

/* -- Example 03. Calling custom hook from display to controller  -- */
<div data-cwc-instructions='{ “on-pull“ : “c-hook:on-start-hook“ }' >

/* -- Example 04. Calling a local custom hook -- */
<div data-cwc-instructions='{ “on-pull“ : “hook:on-start-hook“ }' >
{% endhighlight %}